diff -urN suspend/s2ram-main.c suspend.new/s2ram-main.c
--- suspend/s2ram-main.c	2007-12-19 16:35:13.000000000 +0100
+++ suspend.new/s2ram-main.c	2009-06-14 04:36:10.797977387 +0200
@@ -86,8 +86,12 @@
 
 	/* switch to console 1 first, since we might be in X */
 	active_console = fgconsole();
-	printf("Switching from vt%d to vt1\n", active_console);
-	chvt(1);
+	printf("Switching from vt%d to vt1", active_console);
+	if (chvt(1))
+		printf("... succeeded\n");
+	else
+		printf("... failed\n");
+
 
 	ret = s2ram_hacks();
 	if (ret)
@@ -98,8 +102,11 @@
  out:
 	/* if we switched consoles before suspend, switch back */
 	if (active_console > 0) {
-		printf("switching back to vt%d\n", active_console);
-		chvt(active_console);
+		printf("switching back to vt%d", active_console);
+		if (chvt(active_console))
+			printf("... succeeded\n");
+		else
+			printf("... failed\n");
 	}
 
 	return ret;
Pliki suspend/syscalltest i suspend.new/syscalltest różnią się
diff -urN suspend/vt.c suspend.new/vt.c
--- suspend/vt.c	2007-09-13 21:38:10.000000000 +0200
+++ suspend.new/vt.c	2009-06-14 04:34:11.231322284 +0200
@@ -85,15 +85,24 @@
 	return vtstat.v_active;
 }
 
-void chvt(int num)
+int chvt(int num)
 {
-	int fd = getconsolefd();
-	if (ioctl(fd, VT_ACTIVATE, num)) {
-		perror("chvt: VT_ACTIVATE");
-	}
-	if (ioctl(fd, VT_WAITACTIVE, num)) {
-		perror("VT_WAITACTIVE");
+#define	USER_WAIT_SLEEP_US		100000
+#define	USER_WAIT_MAX_ITERATIONS	50
+	int i, fd, active = 0;
+
+	for (i = 0; i < USER_WAIT_MAX_ITERATIONS; i++) {
+		if (fgconsole() == num) {
+			active = 1;
+			break;
+		}
+		fd = getconsolefd();
+		if (ioctl(fd, VT_ACTIVATE, num)) {
+			perror("chvt: VT_ACTIVATE");
+		}
+		usleep(USER_WAIT_SLEEP_US);
 	}
+	return active;
 }
 
 int is_framebuffer(void)
diff -urN suspend/vt.h suspend.new/vt.h
--- suspend/vt.h	2006-03-16 22:19:01.000000000 +0100
+++ suspend.new/vt.h	2009-06-14 04:34:20.894655045 +0200
@@ -5,6 +5,6 @@
 int open_a_console(const char *fnam);
 int getconsolefd(void);
 int fgconsole(void);
-void chvt(int num);
+int chvt(int num);
 int is_framebuffer(void);
 char *get_fbname(void);
